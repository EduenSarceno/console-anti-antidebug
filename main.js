//SPDX-License-Identifier: AGPL-3.0-only
//Copyright (C) 2022 Eduen Sarce√±o
;(function(){
"use strict"
// This is script.js encoded as base64.
// We need to embed this, because loading it as external source does not
// guarantee that run before everything else.
const scriptContent = 'Ly9TUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQUdQTC0zLjAtb25seQ0KLy9Db3B5cmlnaHQgKEMpIDIwMjIgRWR1ZW4gU2FyY2XDsW8NCi8vDQovL0Fic3RyYWN0OiBzb21lIHdlYnNpdGVzIGhhdmUgYW50aS1kZWJ1ZyB0ZWNobmlxdWVzIHRoYXQgdGFyZ2V0IGNvbnNvbGUNCi8vZnVuY3Rpb25zLiBDYWxsaW5nIGBjb25zb2xlLmxvZ2AgaW4gc29tZSBzaXRlcyB3aWxsIHNlbmQgdG8gdGhlIEhUVFAgc2VydmVyDQovL3VzZXItaW5mb3JtYXRpb24gZGF0YSAoZS5nLiBzcG90aWZ5LmNvbSk7IG90aGVyIHdlYnNpdGVzIHVzZSBgY29uc29sZS5jbGVhcmANCi8vaW50byBhbiBpbmZpbml0ZSBsb29wIHdoZW4gZGV2ZWxvcGVyIHRvb2xzIGFyZSBvcGVuLCB0aGlzIHByZXZlbnQgb2JqZWN0DQovL2ludHJvLXNwZWN0aW9uIChlLmcuIDlhbmltZSkuDQovLw0KLy9UaGlzIGFkZG9uIHByZXZlbnRzIGFudGktZGVidWcgdGVjaG5pcXVlcyB0aGF0IHRhcmdldCBjb25zb2xlIGZ1bmN0aW9ucy4NCjsoZnVuY3Rpb24oKXsNCiJ1c2Ugc3RyaWN0Ig0KY29uc3Qga0NvbnNvbGVPd25EZXNjcmlwdG9ycyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKGNvbnNvbGUpDQoNCi8vIFdlIG5lZWQgdG8gcHJveHkgdGhlc2UgZnVuY3Rpb25zDQo7Ww0KICAnbG9nJywNCiAgJ2RlYnVnJywNCiAgJ3dhcm4nLA0KICAnaW5mbycsDQogICdlcnJvcicsDQogICd0YWJsZScNCl0uZm9yRWFjaChmdW5jdGlvbihzdHIpIHsNCiAgY29uc3QgbG9nZ2VyID0ga0NvbnNvbGVPd25EZXNjcmlwdG9yc1tzdHJdDQogIGlmICghbG9nZ2VyKSB7DQogICAgcmV0dXJuDQogIH0NCiAgY29uc3QgdmFsdWUgPSBsb2dnZXIudmFsdWUNCiAgbG9nZ2VyLnZhbHVlID0gbWFrZVByb3h5TG9nZ2VyKHZhbHVlKQ0KfSkNCg0KLy8gQW5kLCBtYWtlIHRoZXNlIE5PUC1mdW5jdGlvbnMNCjtbDQogICdjbGVhcicsDQogICdkaXInLA0KICAnZGlyeG1sJywNCiAgJ3Byb2ZpbGUnLA0KICAncHJvZmlsZUVuZCcsDQpdLmZvckVhY2goZnVuY3Rpb24oc3RyKSB7DQogIGNvbnN0IE5PUCA9ICgpID0+IHt9DQogIGNvbnN0IHByb3BlcnR5ID0ga0NvbnNvbGVPd25EZXNjcmlwdG9yc1tzdHJdDQogIGlmICghcHJvcGVydHkpIHsNCiAgICByZXR1cm4NCiAgfQ0KICBjb25zdCBvcmlnaW4gPSBwcm9wZXJ0eS52YWx1ZQ0KICBwcm9wZXJ0eS52YWx1ZSA9IE5PUA0KDQogIC8vIEZvciB0ZXN0aW5nIHB1cnBvc2Ugd2UgZXhwb3J0IGEgY29weQ0KICBjb25zdCBjb3B5ID0gT2JqZWN0LmFzc2lnbih7fSwgcHJvcGVydHkpDQogIGNvcHkudmFsdWUgPSBvcmlnaW4NCiAga0NvbnNvbGVPd25EZXNjcmlwdG9yc1snX19fJyArIHN0cl0gPSBjb3B5DQp9KQ0KDQphdm9pZE1vbmtleVBhdGNoaW5nKGtDb25zb2xlT3duRGVzY3JpcHRvcnMpDQpPYmplY3QuZGVmaW5lUHJvcGVydGllcyhjb25zb2xlLCBrQ29uc29sZU93bkRlc2NyaXB0b3JzKQ0KDQpmdW5jdGlvbiBtYWtlUHJveHlMb2dnZXIobG9nZ2VyKSB7DQogIHJldHVybiBmdW5jdGlvbiBwcm94eUxvZ2dlcigpIHsNCiAgICBmb3IgKGNvbnN0IGFyZyBvZiBhcmd1bWVudHMpIHsNCiAgICAgIC8vIFdlIG11c3QgcHJldmVudCBsb2dnaW5nIG9iamVjdHMgdGhhdCBwb3RlbnRpYWxseSBjaGVjayBpZiBkZXYtdG9vbHMgYXJlIG9wZW4uDQogICAgICBpZiAoKGFyZyAhPT0gbnVsbCAmJiB0eXBlb2YoYXJnKSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mKGFyZykgPT09ICdmdW5jdGlvbicpICYmIHR5cGVvZihhcmcudG9TdHJpbmcpID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgIH0NCiAgICBsb2dnZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKQ0KICB9DQp9DQoNCmZ1bmN0aW9uIGF2b2lkTW9ua2V5UGF0Y2hpbmcoZGVzY3JpcHRvcnMpIHsNCiAgZm9yIChjb25zdCBwcm9wZXJ0eSBpbiBkZXNjcmlwdG9ycykgew0KICAgIGNvbnN0IGRlc2NyaXB0b3IgPSBkZXNjcmlwdG9yc1twcm9wZXJ0eV0NCiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IGZhbHNlDQogICAgaWYgKGRlc2NyaXB0b3Iud3JpdGFibGUpIHsNCiAgICAgIGxldCB2YWx1ZSA9IGRlc2NyaXB0b3IudmFsdWUNCiAgICAgIGRlbGV0ZSBkZXNjcmlwdG9yLnZhbHVlDQogICAgICBkZWxldGUgZGVzY3JpcHRvci53cml0YWJsZQ0KICAgICAgLy8gSXQgaXMgYmV0dGVyIHRvIHVzZSBnZXR0ZXItc2V0dGVyIGJlY2F1c2UgZG9pbmcgYHdyaXRhYmxlID0gZmFsc2VgDQogICAgICAvLyBjYW4gY2F1c2UgYSBydW50aW1lIGV4Y2VwdGlvbiBpZiAnc3RyaWN0X21vZGUnIGlzIGFjdGl2ZS4NCiAgICAgIGRlc2NyaXB0b3IuZ2V0ID0gKCkgPT4gdmFsdWUNCiAgICAgIGRlc2NyaXB0b3Iuc2V0ID0gKCkgPT4gdmFsdWUNCiAgICB9DQogIH0NCn0NCg0KfSgpKQ=='

var script
if (document instanceof HTMLDocument) {
  appendScript()
  removeScriptNT()
}

function appendScript() {
  let subtree = document.head || document.documentElement
  let code = atob(scriptContent)
  code = document.createTextNode(code)
  script = document.createElement('script')
  script.type = "text/javascript"
  script.charset = "utf-8"
  script.appendChild(code)
  subtree.appendChild(script)
}

function removeScriptNT() {
  setTimeout(function() {
    var parent = script.parentNode
    parent.removeChild(script)
  }, 0)
}

}())
